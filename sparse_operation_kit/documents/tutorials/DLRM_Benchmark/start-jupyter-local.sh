#!/bin/bash
$SPARK_HOME/bin/pyspark --master ${SPARK_URL} --deploy-mode client --driver-memory 10G --executor-memory 10G --num-executors 1 --executor-cores 6 --conf spark.cores.max=12 --conf spark.task.cpus=6 --conf spark.locality.wait=0 --conf spark.yarn.maxAppAttempts=1 --conf spark.sql.shuffle.partitions=4 --conf spark.sql.files.maxPartitionBytes=1024m --conf spark.task.resource.gpu.amount=0.08 --conf spark.executor.resource.gpu.amount=1 --conf spark.executor.resource.gpu.discoveryScript=./getGpusResources.sh --conf spark.executorEnv.CUDA_MPS_PIPE_DIRECTORY=/tmp/nvidia-mps --conf spark.executorEnv.CUDA_MPS_LOG_DIRECTORY=/tmp/nvidia-log --files $SPARK_HOME/examples/src/main/scripts/getGpusResources.sh
